# 如何确定垃圾

+ 引用计数法

在Java中如果要操作对象，就必须先获取该对象的引用，因此可以通过引用计数法来判断一个对象是否可以被回收。在为一个对象添加一个引用时，引用计数器就加1；为对象删除一个引用时，引用计数器就减1；如果一个对象的引用计数为0，则说明该对象没有被引用，可以回收。**优点是垃圾回收比较及时，实时性比较高，只要对象计数器为 0，则可以直接进行回收操作；而缺点是无法解决循环引用的问题。**

+ 可达性分析

以一系列GC ROOTS的点作为起点向下搜索，当一个对象到任何GC ROOTS都没有引用链相连时，说明该对象可以回收。

在 Java 中可以作为 **CG Roots 的对象**，主要包含以下几个：

1. 所有被同步锁持有的对象，比如被 synchronize 持有的对象；
2. 字符串常量池里的引用（String Table）；
3. 类型为引用类型的静态变量；
4. 虚拟机栈中引用对象；
5. 本地方法栈中的引用对象。